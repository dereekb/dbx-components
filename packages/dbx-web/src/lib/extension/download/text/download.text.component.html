<div class="dbx-download-text-view">
  <dbx-loading [context]="context" [linear]="linear()" [text]="loadingText()">
    <ng-container *ngTemplateOutlet="contentView"></ng-container>
  </dbx-loading>
</div>

<!-- Template -->
<ng-template #contentView>
  <div class="dbx-download-text-view-content">
    @if (showTitle()) {
      <div class="dbx-download-text-view-content-title dbx-mb2 mat-subtitle-2">{{ fileNameSignal() }}</div>
    }
    @if (showPreview()) {
      <div class="dbx-download-text-preview dbx-json dbx-content-pit dbx-content-pit-scrollable dbx-mb3">{{ contentDataSignal() }}</div>
    }
    <div class="dbx-download-text-view-actions">
      <dbx-button dbxAction dbxActionValue [raised]="true" [dbxActionHandler]="handleCopyToClipboard" icon="content_copy" dbxActionButton text="Copy To Clipboard"></dbx-button>
      <dbx-button-spacer></dbx-button-spacer>
      <a #downloadButton [href]="fileUrlSignal()" [attr.download]="fileNameSignal()"><dbx-button icon="download" text="Download" [raised]="true" [working]="!downloadReadySignal()" [disabled]="!downloadReadySignal()"></dbx-button></a>
    </div>
  </div>
</ng-template>

<button class="dbx-base-button dbx-progress-spinner-button" #button mat-button [type]="buttonTypeAttributeSignal()" [color]="configSignal()?.buttonColor" [ngClass]="buttonCssSignal()" [ngStyle]="configSignal()?.customStyle" [disabled]="buttonDisabledSignal()">
  @if (showTextSignal()) {
    @if (showTextButtonIconSignal()) {
      <mat-icon class="mat-button-icon" [class.is-mat-icon]="!configSignal()?.buttonIcon?.fontSet" [class.working]="showProgressSignal()" [ngClass]="configSignal()?.buttonIcon?.customClass" [fontSet]="configSignal()?.buttonIcon?.fontSet!" [fontIcon]="configSignal()?.buttonIcon?.fontIcon!" [color]="configSignal()?.buttonIcon?.color!" [svgIcon]="configSignal()?.buttonIcon?.svgIcon!">
        {{ configSignal()?.buttonIcon?.fontSet ? '' : configSignal()?.buttonIcon?.fontIcon }}
      </mat-icon>
    }
    <span class="button-text" [class.working]="showProgressSignal()">
      {{ configSignal()?.text }}
      <ng-content></ng-content>
    </span>
  }
  @if (showIconSignal()) {
    <!-- Use ng-container to prevent mat-icon from being a child of the button which changes the behavior -->
    <ng-container>
      <mat-icon class="mat-fab-icon" [fontSet]="configSignal()?.buttonIcon?.fontSet!" [fontIcon]="configSignal()?.buttonIcon?.fontIcon!" [color]="configSignal()?.buttonIcon?.color!" [svgIcon]="configSignal()?.buttonIcon?.svgIcon!" [inline]="configSignal()?.fab && configSignal()?.buttonIcon?.inline!">
        {{ configSignal()?.buttonIcon?.fontSet! ? '' : configSignal()?.buttonIcon?.fontIcon! }}
      </mat-icon>
    </ng-container>
  }
  @if (showProgressSignal()) {
    <mat-spinner class="spinner" [diameter]="spinnerSizeSignal()" [color]="configSignal()?.spinnerColor!" [mode]="modeSignal()" [value]="workingValueSignal()" [ngStyle]="customSpinnerStyleSignal()" [ngClass]="customSpinnerStyleClassSignal()" [class.working]="showProgressSignal()"></mat-spinner>
  }
</button>

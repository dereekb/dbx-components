<dbx-section-page header="Profile">
  <dbx-loading [linear]="true" [context]="context">
    <dbx-content-box [wide]="true">
      <dbx-section header="Avatar">
        <div class="">
          <div>
            <img [src]="avatarUrlSignal()" />
          </div>
          <span class="dbx-spacer"></span>
          <div dbxFirebaseStorageFileDocument>
            <dbx-file-upload mode="button" icon="file_copy" hint="Drag one file here." text="Drop Any Type of File" accept="*" (filesChanged)="buttonModeFilesUploaded = $event" [clickAreaToUpload]="true"></dbx-file-upload>
          </div>
        </div>
      </dbx-section>
    </dbx-content-box>
    <dbx-content-box [wide]="true">
      <dbx-section dbxAction dbxActionEnforceModified [dbxActionHandler]="handleChangeUsername" header="Username ({{ username$ | async }})" hint="Change your profile username.">
        <demo-profile-username-form dbxActionForm [dbxFormSource]="profileData$" [dbxActionFormIsModified]="isUsernameModified"></demo-profile-username-form>
        <dbx-button dbxActionButton text="Change Username"></dbx-button>
        <dbx-error dbxActionError></dbx-error>
        <div *dbxActionHasSuccess="3000" class="dbx-success">Success</div>
      </dbx-section>
    </dbx-content-box>
    <dbx-content-box [wide]="true">
      <dbx-section header="Information" dbxAction dbxActionAutoTrigger useFastTriggerPreset dbxActionEnforceModified [dbxActionHandler]="handleUpdateProfile" hint="Change your profile information.">
        <demo-profile-form [dbxActionFormDisabledOnWorking]="false" dbxActionForm [dbxFormSource]="profileData$" [dbxActionFormIsModified]="isProfileModified"></demo-profile-form>
        <dbx-error dbxActionError></dbx-error>
        <dbx-loading-progress *dbxActionIsWorking [linear]="true"></dbx-loading-progress>
        <div *dbxActionHasSuccess="3000" class="dbx-success">Saved Changes</div>
      </dbx-section>
    </dbx-content-box>
  </dbx-loading>
</dbx-section-page>
